var mouseX,mouseY,$body=document.querySelector("body"),$main=document.getElementById("main"),$meWindow=document.getElementById("meWindow"),$musicWindow=document.getElementById("musicWindow"),$journalWindow=document.getElementById("journalWindow"),$portfolioWindow=document.getElementById("portfolioWindow"),$contactWindow=document.getElementById("contactWindow"),$closeAll=document.querySelector(".close-all"),$updateURL=function(e){history.replaceState(void 0,"",e)},allBtns=document.querySelectorAll(".wiggle-hover, .markdown a");window.addEventListener("mousemove",function(e){mouseX=e.clientX,mouseY=e.clientY,$body.style.setProperty("--pointer-x",mouseX),$body.style.setProperty("--pointer-y",mouseY)}),allBtns.forEach(function(t){t.addEventListener("mouseenter",function(){var e=t.getBoundingClientRect();t.style.setProperty("--x",e.left),t.style.setProperty("--y",e.top),t.style.setProperty("--w",e.width),t.style.setProperty("--h",e.height)})});var contactLink=document.getElementById("contact"),chatWindow=document.getElementById("chat-window"),messagesList=document.getElementById("chat-messages"),chatControls=document.getElementById("chat-controls"),nextButton=document.getElementById("nextButton"),nextButtonWrapper=document.getElementById("next-button-wrapper"),inputFields=document.querySelectorAll("#chat-controls textarea"),form=document.getElementById("contact-form"),editButtons=[],formSubmit=null,formClear=null,state=0,states=["yourName","yourMessage","yourEmail","confirm"],userName="",typingBubble=document.createElement("div");typingBubble.classList.add("typingDots","fromThem"),typingBubble.innerHTML='<div class="message typing"><p><span>•</span><span>•</span><span>•</span></p></div>';var confirmModalTemplate=document.getElementById("confirmModal"),confirmModal=confirmModalTemplate.content.cloneNode(!0),responses=["Okay, ".concat(userName,"! What do you want to say to me?"),"Okay, that's pretty cool. Will you give me your email so I can reply to you?",""];function chatPush(e,t){var n="user"==e?"fromMe":"fromThem",e=document.createElement("div");e.classList.add(n),e.innerHTML="fromMe"==n?"<div class='message'><div><button class='message-edit'>Edit</button></div><p data-field=\"".concat(states[state],'"')+">"+t+"</p></div>":"<div class='message'><p>"+t+"</div>",messagesList.appendChild(e),showLatestMessage()}function updateEditButtons(){(editButtons=document.querySelectorAll(".message-edit")).forEach(function(e){e.addEventListener("click",function(e){var t=e.target,n=t.closest(".message"),e=n.querySelector("p");editMessage(t,n,e)})})}chatWindow.setAttribute("data-state",states[0]);var editMessage=function(e,t,n){var o,i=n.getAttribute("contenteditable");""!==n.innerText&&(n.toggleAttribute("contenteditable"),null===i?(t.setAttribute("tabindex","0"),t.classList.add("editable"),e.innerText="Save"):(o=n.innerText,t.removeAttribute("tabindex"),t.classList.remove("editable"),e.innerText="Edit",inputFields.forEach(function(e){e.id==n.getAttribute("data-field")&&(e.innerHTML=o)})))};function inputValueCheck(){inputFields[state].value?(nextButtonWrapper.classList.remove("disabled"),nextButton.setAttribute("tabindex","0")):(nextButtonWrapper.classList.add("disabled"),nextButton.setAttribute("tabindex","-1"))}function showLatestMessage(){messagesList.lastChild.scrollIntoView({behavior:"smooth",block:"end"})}inputFields.forEach(function(t){t.addEventListener("keydown",function(e){13==e.which&&(e.preventDefault(),t.value&&(event.stopPropagation(),nextButton.click(),nextButton.classList.add("animating")))}),t.addEventListener("keyup",function(){inputValueCheck()})}),nextButton.addEventListener("click",function(e){e.preventDefault(),nextButton.classList.add("animating"),nextButton.addEventListener("animationend",function(){nextButton.classList.remove("animating"),nextButton.blur()}),message=document.querySelector("#".concat(states[state])).value,message&&(chatPush("user",message),updateEditButtons(),saveName(),updateState(),state<states.length-1?(addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you",responses[state%4-1])},2500)):(addTypingBubble(),setTimeout(function(){removeTypingBubble(),addConfirmBox()},2500)))});var addTypingBubble=function(){chatControls.classList.add("pointer-events-none"),setTimeout(function(){messagesList.appendChild(typingBubble),showLatestMessage()},500)},removeTypingBubble=function(){chatControls.classList.remove("pointer-events-none"),messagesList.removeChild(typingBubble),inputFields[state].focus()},addConfirmBox=function(){messagesList.appendChild(confirmModal.cloneNode(!0)),showLatestMessage(),formSubmit=document.querySelector("#formSubmit"),confirmBox=document.querySelector("#confirmBox"),formClear=document.querySelector("#formClear"),formSubmit.addEventListener("click",function(e){formSubmit.setAttribute("disabled","true"),e.preventDefault();e=new FormData(form);fetch(form.getAttribute("action"),{method:"POST",headers:{Accept:"application/x-www-form-urlencoded;charset=UTF-8","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8",enctype:"application/x-www-form-urlencoded"},body:new URLSearchParams(e).toString()}).then(function(e){e&&(formSubmit.blur(),confirmBox.classList.add("opacity-50","pointer-events-none"),addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you","Awesome, thanks, ".concat(userName,"! I'll get back to you soon."))},2500))})})};function saveName(){inputFields.forEach(function(e){"yourName"===e.name&&(e=e.value.split(" "),userName=e[0],responses[0]="Oh hey, ".concat(userName,"! What's up?"))})}function updateState(){currentState=states[(state=(state+1)%4)%4],chatWindow.setAttribute("data-state",currentState),inputValueCheck()}contactLink.addEventListener("click",function(){addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you","Hello, Stephen here! 👋 Who are you?")},2500)},{once:!0});var draggableTarget=".draggable",draggableItems=document.querySelectorAll(draggableTarget),draggableWindowCheck=function(){640<=window.innerWidth?interact(draggableTarget).draggable(!0):(interact(draggableTarget).draggable(!1),draggableItems.forEach(function(e){e.style.transform="none",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}))};function dragMoveListener(e){var t=e.target,n=Math.floor((parseFloat(t.getAttribute("data-x"))||0)+e.dx),e=Math.floor((parseFloat(t.getAttribute("data-y"))||0)+e.dy);t.style.webkitTransform=t.style.transform="translate("+n+"px, "+e+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",e)}interact(draggableTarget).draggable({enabled:!1,inertia:!1,autoScroll:!0,allowFrom:".draggable-handle",modifiers:[interact.modifiers.restrictRect({restriction:"body",endOnly:!1})],onmove:dragMoveListener}),window.addEventListener("resize",function(){draggableWindowCheck()}),draggableWindowCheck();var onResize=function(){$body.style.setProperty("--windowHeight",window.innerHeight+"px")},overlayFadeOut=function(){document.querySelector(".fade-overlay").classList.add("removed")};window.addEventListener("resize",function(){onResize()}),overlayFadeOut(),onResize();var igHeart=document.querySelector(".ig-heart-btn"),igHeartSvg=igHeart.querySelector("svg"),igHeartText=document.querySelector(".ig-heart-text"),instagramHeart=function(){igHeart.classList.contains("liked")?(igHeart.classList.remove("liked"),igHeartText.textContent="0 Likes"):(igHeart.classList.add("liked"),igHeartText.textContent="1 Like!"),igHeart.classList.add("animating"),igHeart.addEventListener("animationend",function(){igHeart.classList.remove("animating")})};igHeart.addEventListener("click",function(e){e.preventDefault(),instagramHeart()});var current=0,igImages=document.querySelectorAll(".ig-image"),totalImages=igImages.length,igDots=document.querySelectorAll(".ig-dot"),igCaptions=document.querySelectorAll(".ig-caption"),igDates=document.querySelectorAll(".ig-date"),igLeft=document.querySelector(".ig-left"),igRight=document.querySelector(".ig-right"),igSlider=document.querySelector(".ig-slider");igImages.forEach(function(e,t){e.style.transform="translateX(".concat(100*t,"%)")});var igUpdate=function(){igDots.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")}),igCaptions.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")}),igDates.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")})},nextImage=function(){current+=1,igLeft.style.visibility="visible",totalImages-1<=current&&(current=totalImages-1,igRight.style.visibility="hidden",igLeft.focus()),moveSlider(),igUpdate()},prevImage=function(){--current,igRight.style.visibility="visible",current<=0&&(current=0,igLeft.style.visibility="hidden",igRight.focus()),moveSlider(),igUpdate()},moveSlider=function(){igSlider.style.transform="translateX(".concat(-100*current,"%)")};igLeft.addEventListener("click",function(e){e.preventDefault(),prevImage()}),igRight.addEventListener("click",function(e){e.preventDefault(),nextImage()}),igLeft.style.visibility="hidden",igUpdate();var $activeJournalEntry,journalSidebarLinks=document.querySelectorAll(".journal-link"),journalEntry=document.querySelector(".journal"),noteScroller=document.querySelector(".note-area"),journalContent=document.getElementById("journal-content"),journalSidebarOpenButton=document.getElementById("journal-open"),journalSidebarCloseButton=document.getElementById("journal-close"),journalSidebar=document.getElementById("journal-sidebar"),journalWindowCloseButton=$journalWindow.querySelector(".window-close"),$articleImages=null,displayNote=function(e){e.classList.add("active");e=hrefToQuery(e);$activeJournalEntry=e,fetch("journal/".concat(e,"/index.html")).then(function(e){return e.text()}).then(function(e){journalEntry.innerHTML=e,noteScroller.scrollTop=0,$articleImages=journalEntry.querySelectorAll("img"),$imageCheck()}),$updateURL("?journal=".concat(e))},hrefToQuery=function(e){e=e.getAttribute("href");return query=e.split("="),currentItem=query[1],currentItem};function getQueryVariable(e){for(var t=window.location.search.substring(1).split("&"),n=0;n<t.length;n++){var o=t[n].split("=");if(decodeURIComponent(o[0])==e)return decodeURIComponent(o[1])}}journalSidebarLinks.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),journalSidebarLinks.forEach(function(e){e.classList.remove("active")}),displayNote(t),journalSidebar.classList.remove("open"),journalSidebarCloseButton.classList.remove("open")})}),journalSidebarOpenButton.addEventListener("click",function(){journalSidebar.classList.contains("open")?(journalSidebar.classList.remove("open"),journalSidebarCloseButton.classList.remove("open")):(journalSidebar.classList.add("open"),journalSidebarCloseButton.classList.add("open"))}),journalSidebarCloseButton.addEventListener("click",function(){journalSidebar.classList.contains("open")?(journalSidebar.classList.remove("open"),journalSidebarCloseButton.classList.remove("open")):(journalSidebar.classList.add("open"),journalSidebarCloseButton.classList.add("open"))}),journalWindowCloseButton.addEventListener("click",function(){$updateURL("/")});var musicCurrentVal,song,currentTimeSec,durationSeconds,request,currentSong,wasPlaying,title,thumbnail,src,$query=getQueryVariable("journal"),$openJournal=function(t){journalSidebarLinks.forEach(function(e){hrefToQuery(e)===t&&displayNote(e)})},flipping=new Flipping({duration:600}),lightboxTemplate=document.getElementById("lightbox-template").content.cloneNode(!0),$imageCheck=function(){$articleImages.forEach(function(n){n.addEventListener("click",function(){$main.appendChild(lightboxTemplate.cloneNode(!0));var e=document.getElementById("lightbox-container"),t=document.getElementById("lightbox");document.getElementById("lightbox-overlay");n.dataset.flipKey="lightbox",src=n.getAttribute("src"),console.log(src),t.setAttribute("src",src),flipping.read(),t.complete&&setTimeout(function(){e.classList.remove("opacity-0")},100),e.addEventListener("click",function(){e.classList.add("opacity-0"),e.addEventListener("transitionend",function(){e.remove()})})})})},musicSlider=document.querySelector("#music-slider"),musicProgressBar=document.querySelector("#music-progress-bar"),musicWrapper=document.getElementById("music-state-wrapper"),playState=musicWrapper.getAttribute("data-state"),playButton=document.getElementById("music-play-button"),playIcon=playButton.querySelector("#music-play-icon"),pauseIcon=playButton.querySelector("#music-pause-icon"),musicWindowCloseButton=$musicWindow.querySelector(".window-close"),musicLink=document.getElementById("music"),tracks=document.querySelectorAll(".playlist-item"),musicThumbnail=document.getElementById("music-thumbnail"),musicTitle=document.getElementById("music-title");musicSlider.addEventListener("input",function(){window.requestAnimationFrame(function(){musicProgressBar.style.transform="scaleX(".concat(musicSlider.value/100,")")}),song&&(song.pause(),song.seek(musicSlider.value*durationSeconds/100))}),musicSlider.addEventListener("mousedown",function(){wasPlaying="playing"===playState&&(song.pause(),!0)}),musicSlider.addEventListener("touchstart",function(){wasPlaying="playing"===playState&&(song.pause(),!0)}),musicSlider.addEventListener("mouseup",function(){wasPlaying&&play()}),musicSlider.addEventListener("touchend",function(){wasPlaying&&play()}),playButton.addEventListener("click",function(){updatePlayState()});var updatePlayState=function(){"paused"===playState?play():"playing"===playState&&pause()},updateProgressBar=function e(){request=requestAnimationFrame(e),currentTimeSec=song.seek(),currentTimePercentage=currentTimeSec/durationSeconds*100,setProgressBar(currentTimePercentage)},setProgressBar=function(e){musicSlider.value=e,musicProgressBar.style.transform="scaleX(".concat(e/100,")")},songLoading=function(e,t){currentSong=t,playState="loading",musicWrapper.setAttribute("data-state",playState),Howler.unload(),musicSlider.setAttribute("disabled",""),playButton.setAttribute("disabled",""),homeMusicButtons.classList.add("pointer-events-none"),setProgressBar(0),src=e.getAttribute("data-src"),thumbnail=e.getAttribute("data-thumbnail"),title=e.getAttribute("data-title"),song=new Howl({src:["".concat(src,".webm"),"".concat(src,".mp3")]}),musicThumbnail.src=thumbnail,musicTitle.innerHTML="Loading...",musicSlider.value=0,cancelAnimationFrame(request)},songLoaded=function(){durationSeconds=song.duration(),musicTitle.innerHTML=title,musicTitle.classList.remove("text-black-600"),musicTitle.classList.add("text-black-900"),play(),musicSlider.removeAttribute("disabled"),playButton.removeAttribute("disabled"),homeMusicButtons.classList.remove("pointer-events-none")},play=function(){playState="playing",musicWrapper.setAttribute("data-state",playState),revealPauseButton(),song.play(),updateProgressBar()},pause=function(){playState="paused",musicWrapper.setAttribute("data-state",playState),revealPlayButton(),song.pause(),cancelAnimationFrame(request)},nextSong=function(){currentSong<tracks.length-1?(pause(),tracks[currentSong+1].click()):(pause(),song.stop(),resetMusic())},prevSong=function(){0<currentSong?(pause(),tracks[currentSong-1].click()):(pause(),song.stop(),resetMusic())},playSong=function(e,t){songLoading(e,t),song.on("load",function(){songLoaded()}),song.on("end",function(){nextSong()})};tracks.forEach(function(e,t){e.addEventListener("click",function(){"playing"===playState&&pause(),currentSong===t?play():playSong(e,t),tracks.forEach(function(e){e.classList.remove("current")}),e.classList.add("current")})});var resetMusic=function(){currentSong=null,musicTitle.innerHTML="Thanks for listening! ❤️",musicThumbnail.src="",setProgressBar(0),musicSlider.setAttribute("disabled",""),playButton.setAttribute("disabled",""),tracks.forEach(function(e){e.classList.remove("current")}),homeMusicButtons.classList.remove("active")},homeMusicButtons=document.getElementById("homeMusicButtons"),homePlay=document.getElementById("homePlay"),homePause=document.getElementById("homePause"),homeNext=document.getElementById("homeNext"),homePrev=document.getElementById("homePrev");homePause.addEventListener("click",function(){pause()}),homePlay.addEventListener("click",function(){play()}),homeNext.addEventListener("click",function(){nextSong()}),homePrev.addEventListener("click",function(){prevSong()});var revealPlayButton=function(){homePause.classList.add("hidden"),homePlay.classList.remove("hidden")},revealPauseButton=function(){homePause.classList.remove("hidden"),homePlay.classList.add("hidden")};$closeAll.addEventListener("click",function(){revealHomeButtons()}),musicWindowCloseButton.addEventListener("click",function(){revealHomeButtons()}),musicLink.addEventListener("click",function(){revealHomeButtons()});var currentTheme,revealHomeButtons=function(){0<=currentSong&&("paused"!=playState?setTimeout(function(){$musicWindow.classList.contains("closed")?homeMusicButtons.classList.add("active"):homeMusicButtons.classList.remove("active")},100):homeMusicButtons.classList.remove("active"))},LOCAL_STORAGE_THEME="theme.mode";function save(){localStorage.setItem(LOCAL_STORAGE_THEME,currentTheme)}currentTheme=localStorage.getItem(LOCAL_STORAGE_THEME)?localStorage.getItem(LOCAL_STORAGE_THEME):"light",document.documentElement.setAttribute("data-theme",currentTheme),window.onload=function(){var e=document.getElementById("theme-switcher-input");"dark"===currentTheme&&e.setAttribute("checked",!0);e.addEventListener("change",function(){currentTheme=e.checked?(document.documentElement.setAttribute("data-theme","dark"),document.documentElement.classList.add("color-theme-in-transition"),window.setTimeout(function(){document.documentElement.classList.remove("color-theme-in-transition")},1e3),"dark"):(document.documentElement.setAttribute("data-theme","light"),document.documentElement.classList.add("color-theme-in-transition"),window.setTimeout(function(){document.documentElement.classList.remove("color-theme-in-transition")},50),"light"),save()})};var closedWindows=document.querySelectorAll(".closed"),closeAllButton=$closeAll.querySelector("button"),windowWrappers=document.querySelectorAll(".window-wrapper"),projectPreviews=document.querySelectorAll(".project-preview"),closeButtons=document.querySelectorAll(".window-close"),windowZ=50,windowFunctions=function(){closeButtons.forEach(function(e){e.addEventListener("click",function(){e.closest(".window-wrapper").classList.add("closed"),checkClosedList()})});function t(e,t){e.preventDefault(),t.classList.remove("closed"),windowWrappers.forEach(function(e){e.classList.add("disabled")}),t.classList.remove("disabled"),windowZ+=1,t.style.zIndex=windowZ,$closeAll.focus(),$closeAll.blur(),checkClosedList()}document.getElementById("me").addEventListener("click",function(e){t(e,$meWindow)}),document.getElementById("music").addEventListener("click",function(e){t(e,$musicWindow)});var e=document.getElementById("journal");e.addEventListener("click",function(e){t(e,$journalWindow),$activeJournalEntry&&$updateURL("?journal=".concat($activeJournalEntry))}),$query&&($openJournal($query),e.click()),document.getElementById("portfolio").addEventListener("click",function(e){t(e,$portfolioWindow)}),document.getElementById("contact").addEventListener("click",function(e){t(e,$contactWindow)}),windowWrappers.forEach(function(t){t.addEventListener("mousedown",function(){var e;windowZ+=1,(e=t).style.zIndex=windowZ,windowWrappers.forEach(function(e){e.classList.add("disabled")}),e.classList.remove("disabled")})})},checkClosedList=function(){(closedWindows=document.querySelectorAll(".window-wrapper.closed")).length<windowWrappers.length-1?$closeAll.classList.add("visible"):$closeAll.classList.remove("visible"),closedWindows.length<windowWrappers.length?$body.classList.add("window-open"):$body.classList.remove("window-open"),onResize()};$closeAll.addEventListener("click",function(){windowWrappers.forEach(function(e){e.classList.add("closed")}),projectPreviews.forEach(function(e){e.classList.add("closed")}),checkClosedList(),$updateURL("/")}),windowFunctions();