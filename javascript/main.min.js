var $body=document.querySelector("body"),$header=document.getElementById("#header"),$nav=document.getElementById("#nav"),$footer=document.getElementById("#footer"),contactLink=document.getElementById("contact"),chatWindow=document.getElementById("chat-window"),messagesList=document.getElementById("chat-messages"),chatControls=document.getElementById("chat-controls"),nextButton=document.getElementById("nextButton"),nextButtonWrapper=document.getElementById("next-button-wrapper"),inputFields=document.querySelectorAll("#chat-controls textarea"),form=document.getElementById("contact-form"),formSubmit=null,formClear=null,state=0,states=["yourName","yourMessage","yourEmail","confirm"],userName="",typingBubble=document.createElement("div");typingBubble.classList.add("typingDots","fromThem"),typingBubble.innerHTML='<div class="message typing"><p><span>•</span><span>•</span><span>•</span></p></div>';var confirmModalTemplate=document.getElementById("confirmModal"),confirmModal=confirmModalTemplate.content.cloneNode(!0),responses=["Okay, ".concat(userName,"! What do you want to say to me?"),"Got it – and at what email address should I respond to you?",""];function chatPush(e,t){var n;n="user"==e?"fromMe":"fromThem";var o=document.createElement("div");o.classList.add(n),o.innerHTML="fromMe"==n?'<div class="message"><p>'+t+'</p> <div><button onclick="editMessage(this)">Edit</button></div></div>':'<div class="message"><p>'+t+"</div>",messagesList.appendChild(o),showLatestMessage()}nextButton.addEventListener("click",function(){nextButton.classList.add("animating"),nextButton.addEventListener("animationend",function(){nextButton.classList.remove("animating"),nextButton.blur()})}),chatWindow.setAttribute("data-state",states[0]);var editMessage=function(e){var t=e.closest(".message"),n=t.querySelector("p"),o=n.getAttribute("contenteditable");n.toggleAttribute("contenteditable"),null===o?(t.setAttribute("tabindex","0"),t.classList.add("editable"),e.innerText="Save"):(t.removeAttribute("tabindex"),t.classList.remove("editable"),e.innerText="Edit")};function inputValueCheck(){inputFields[state].value?(nextButtonWrapper.classList.remove("disabled"),nextButton.setAttribute("tabindex","0")):(nextButtonWrapper.classList.add("disabled"),nextButton.setAttribute("tabindex","-1"))}function showLatestMessage(){messagesList.lastChild.scrollIntoView({behavior:"smooth",block:"end"})}inputFields.forEach(function(t){t.addEventListener("keydown",function(e){inputValueCheck(),t.value&&13==e.which&&(e.preventDefault(),event.stopPropagation(),nextButton.click(),nextButton.classList.add("animating"))})}),nextButton.addEventListener("click",function(e){e.preventDefault(),message=document.querySelector("#".concat(states[state])).value,message&&(chatPush("user",message),saveName(),updateState(),state<states.length-1?(addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you",responses[state%4-1])},2500)):(addTypingBubble(),setTimeout(function(){removeTypingBubble(),addConfirmBox()},2500)))});var addTypingBubble=function(){inputFields.forEach(function(e){e.setAttribute("disabled",!0)}),chatControls.classList.add("pointer-events-none"),setTimeout(function(){messagesList.appendChild(typingBubble),showLatestMessage()},700)},removeTypingBubble=function(){state<states.length-1&&inputFields.forEach(function(e){e.removeAttribute("disabled")}),chatControls.classList.remove("pointer-events-none"),messagesList.removeChild(typingBubble),inputFields[state].focus()},addConfirmBox=function(){messagesList.appendChild(confirmModal.cloneNode(!0)),showLatestMessage(),formSubmit=document.querySelector("#formSubmit"),confirmBox=document.querySelector("#confirmBox"),formClear=document.querySelector("#formClear"),formSubmit.addEventListener("click",function(e){e.preventDefault();var t=new FormData(form);fetch(form.getAttribute("action"),{method:"POST",headers:{Accept:"application/x-www-form-urlencoded;charset=UTF-8","Content-Type":"application/x-www-form-urlencoded;charset=UTF-8"},body:new URLSearchParams(t).toString()}).then(function(e){e&&(formSubmit.blur(),confirmBox.classList.add("opacity-50","pointer-events-none"),addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you","Thanks, ".concat(userName,"! I'll get back to you soon."))},2500))})})};function saveName(){inputFields.forEach(function(e){if("yourName"===e.name){var t=e.value.split(" ");userName=t[0],responses[0]="Hi, ".concat(userName,"! What do you want to say to me?")}})}function updateState(){currentState=states[(state=(state+1)%4)%4],chatWindow.setAttribute("data-state",currentState),inputValueCheck()}contactLink.addEventListener("click",function(){addTypingBubble(),setTimeout(function(){removeTypingBubble(),chatPush("you","Hi! Want to get in touch with me? First tell me what your name is!")},2500)},{once:!0});var draggableTarget=".draggable",draggableItems=document.querySelectorAll(draggableTarget),draggableWindowCheck=function(){640<=window.innerWidth?interact(draggableTarget).draggable(!0):(interact(draggableTarget).draggable(!1),draggableItems.forEach(function(e){e.style.transform="none",e.setAttribute("data-x",0),e.setAttribute("data-y",0)}))};function dragMoveListener(e){var t=e.target,n=Math.floor((parseFloat(t.getAttribute("data-x"))||0)+e.dx),o=Math.floor((parseFloat(t.getAttribute("data-y"))||0)+e.dy);t.style.webkitTransform=t.style.transform="translate("+n+"px, "+o+"px)",t.setAttribute("data-x",n),t.setAttribute("data-y",o)}interact(draggableTarget).draggable({enabled:!1,inertia:!1,autoScroll:!0,allowFrom:".draggable-handle",modifiers:[interact.modifiers.restrictRect({restriction:"body",endOnly:!1})],onmove:dragMoveListener}),window.addEventListener("resize",function(){draggableWindowCheck()}),draggableWindowCheck();var onResize=function(){$body.style.setProperty("--windowHeight",window.innerHeight+"px")},overlayFadeOut=function(){document.querySelector(".fade-overlay").classList.add("removed")};window.addEventListener("resize",function(){onResize()}),overlayFadeOut(),onResize();var igHeart=document.querySelector(".ig-heart-btn"),igHeartSvg=igHeart.querySelector("svg"),igHeartText=document.querySelector(".ig-heart-text"),igCaptions=document.querySelectorAll(".ig-caption-container"),instagramHeart=function(){igHeart.classList.contains("liked")?(igHeart.classList.remove("liked"),igHeartText.textContent="0 Likes"):(igHeart.classList.add("liked"),igHeartText.textContent="1 Like!"),igHeart.classList.add("animating"),igHeart.addEventListener("animationend",function(){igHeart.classList.remove("animating")})};igHeart.addEventListener("click",function(e){e.preventDefault(),instagramHeart()}),igCaptions.forEach(function(e){e.addEventListener("click",function(){e.classList.contains("reveal")?e.classList.remove("reveal"):e.classList.add("reveal")})});var current=0,igImages=document.querySelectorAll(".ig-image"),totalImages=igImages.length,igDots=document.querySelectorAll(".ig-dot"),igDates=(igCaptions=document.querySelectorAll(".ig-caption"),document.querySelectorAll(".ig-date")),igLeft=document.querySelector(".ig-left"),igRight=document.querySelector(".ig-right"),igSlider=document.querySelector(".ig-slider");igImages.forEach(function(e,t){e.style.transform="translateX(".concat(100*t,"%)")});var igUpdate=function(){igDots.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")}),igCaptions.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")}),igDates.forEach(function(e,t){t===current?e.classList.add("current"):e.classList.remove("current")})},nextImage=function(){current+=1,igLeft.style.visibility="visible",totalImages-1<=current&&(current=totalImages-1,igRight.style.visibility="hidden",igLeft.focus()),moveSlider(),igUpdate()},prevImage=function(){--current,igRight.style.visibility="visible",current<=0&&(current=0,igLeft.style.visibility="hidden",igRight.focus()),moveSlider(),igUpdate()},moveSlider=function(){igSlider.style.transform="translateX(".concat(-100*current,"%)")};igLeft.addEventListener("click",function(e){e.preventDefault(),prevImage()}),igRight.addEventListener("click",function(e){e.preventDefault(),nextImage()}),igLeft.style.visibility="hidden",igUpdate();var aboutSidebarLinks=document.querySelectorAll(".about-note-link"),aboutNote=document.querySelector(".about-note"),journalContent=document.getElementById("journal-content"),aboutSidebarOpenButton=document.getElementById("about-note-open"),aboutSidebarCloseButton=document.getElementById("about-note-close"),aboutSidebar=document.getElementById("about-note-sidebar"),displayNote=function(e){var t=e.getAttribute("data-note");fetch("journal/".concat(t,"/index.html")).then(function(e){return e.text()}).then(function(e){aboutNote.innerHTML=e})};aboutSidebarLinks.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),displayNote(t),aboutSidebar.classList.remove("open"),aboutSidebarCloseButton.classList.remove("open")})}),displayNote(aboutSidebarLinks[0]),aboutSidebarOpenButton.addEventListener("click",function(){aboutSidebar.classList.contains("open")?(aboutSidebar.classList.remove("open"),aboutSidebarCloseButton.classList.remove("open")):(aboutSidebar.classList.add("open"),aboutSidebarCloseButton.classList.add("open"))}),aboutSidebarCloseButton.addEventListener("click",function(){aboutSidebar.classList.contains("open")?(aboutSidebar.classList.remove("open"),aboutSidebarCloseButton.classList.remove("open")):(aboutSidebar.classList.add("open"),aboutSidebarCloseButton.classList.add("open"))});var musicCurrentVal,song,currentTimeSec,durationSeconds,request,currentSong,wasPlaying,title,thumbnail,src,musicSlider=document.querySelector("#music-slider"),musicProgressBar=document.querySelector("#music-progress-bar"),musicWrapper=document.getElementById("music-state-wrapper"),playState=musicWrapper.getAttribute("data-state"),playButton=document.getElementById("music-play-button"),playIcon=playButton.querySelector("#music-play-icon"),pauseIcon=playButton.querySelector("#music-pause-icon"),musicWindowWrapper=musicWrapper.closest(".window-wrapper"),musicWindowCloseButton=musicWindowWrapper.querySelector(".window-close"),musicLink=document.getElementById("music"),closeAllButton=document.querySelector(".close-all"),tracks=document.querySelectorAll(".playlist-item"),musicThumbnail=document.getElementById("music-thumbnail"),musicTitle=document.getElementById("music-title");musicSlider.addEventListener("input",function(){window.requestAnimationFrame(function(){musicProgressBar.style.transform="scaleX(".concat(musicSlider.value/100,")")}),song&&(song.pause(),song.seek(musicSlider.value*durationSeconds/100))}),musicSlider.addEventListener("mousedown",function(){wasPlaying="playing"===playState&&(song.pause(),!0)}),musicSlider.addEventListener("touchstart",function(){wasPlaying="playing"===playState&&(song.pause(),!0)}),musicSlider.addEventListener("mouseup",function(){wasPlaying&&play()}),musicSlider.addEventListener("touchend",function(){wasPlaying&&play()}),playButton.addEventListener("click",function(){updatePlayState()});var updatePlayState=function(){"paused"===playState?play():"playing"===playState&&pause()},updateProgressBar=function e(){request=requestAnimationFrame(e),currentTimeSec=song.seek(),currentTimePercentage=currentTimeSec/durationSeconds*100,setProgressBar(currentTimePercentage)},setProgressBar=function(e){musicSlider.value=e,musicProgressBar.style.transform="scaleX(".concat(e/100,")")},songLoading=function(e,t){currentSong=t,playState="loading",musicWrapper.setAttribute("data-state",playState),Howler.unload(),musicSlider.setAttribute("disabled",""),playButton.setAttribute("disabled",""),homeMusicButtons.classList.add("pointer-events-none"),setProgressBar(0),src=e.getAttribute("data-src"),thumbnail=e.getAttribute("data-thumbnail"),title=e.getAttribute("data-title"),song=new Howl({src:[src]}),musicThumbnail.src=thumbnail,musicTitle.innerHTML="Loading...",musicSlider.value=0,cancelAnimationFrame(request)},songLoaded=function(){durationSeconds=song.duration(),musicTitle.innerHTML=title,play(),musicSlider.removeAttribute("disabled"),playButton.removeAttribute("disabled"),homeMusicButtons.classList.remove("pointer-events-none")},play=function(){playState="playing",musicWrapper.setAttribute("data-state",playState),revealPauseButton(),song.play(),updateProgressBar()},pause=function(){playState="paused",musicWrapper.setAttribute("data-state",playState),revealPlayButton(),song.pause(),cancelAnimationFrame(request)},nextSong=function(){currentSong<tracks.length-1?(pause(),tracks[currentSong+1].click()):(pause(),song.stop(),resetMusic())},prevSong=function(){0<currentSong?(pause(),tracks[currentSong-1].click()):(pause(),song.stop(),resetMusic())},playSong=function(e,t){songLoading(e,t),song.on("load",function(){songLoaded()}),song.on("end",function(){next()})};tracks.forEach(function(e,t){e.addEventListener("click",function(){"playing"===playState&&pause(),currentSong===t?play():playSong(e,t),tracks.forEach(function(e){e.classList.remove("current")}),e.classList.add("current")})});var resetMusic=function(){currentSong=null,musicTitle.innerHTML="Thanks for listening! ❤️",musicThumbnail.src="",setProgressBar(0),musicSlider.setAttribute("disabled",""),playButton.setAttribute("disabled",""),tracks.forEach(function(e){e.classList.remove("current")}),homeMusicButtons.classList.remove("active")},homeMusicButtons=document.getElementById("homeMusicButtons"),homePlay=document.getElementById("homePlay"),homePause=document.getElementById("homePause"),homeNext=document.getElementById("homeNext"),homePrev=document.getElementById("homePrev");homePause.addEventListener("click",function(){pause()}),homePlay.addEventListener("click",function(){play()}),homeNext.addEventListener("click",function(){nextSong()}),homePrev.addEventListener("click",function(){prevSong()});var revealPlayButton=function(){homePause.classList.add("hidden"),homePlay.classList.remove("hidden")},revealPauseButton=function(){homePause.classList.remove("hidden"),homePlay.classList.add("hidden")};closeAllButton.addEventListener("click",function(){revealHomeButtons()}),musicWindowCloseButton.addEventListener("click",function(){revealHomeButtons()}),musicLink.addEventListener("click",function(){revealHomeButtons()});var revealHomeButtons=function(){0<=currentSong&&("paused"!=playState?setTimeout(function(){musicWindowWrapper.classList.contains("closed")?homeMusicButtons.classList.add("active"):homeMusicButtons.classList.remove("active")},100):homeMusicButtons.classList.remove("active"))},projects=document.querySelectorAll(".project-link"),projectPreviews=document.querySelectorAll(".project-preview"),closeButtons=document.querySelectorAll(".close-preview"),previewOverlays=document.querySelectorAll(".preview-overlay"),portfolioWindowCloseButtons=document.querySelector("#portfolioWindow .window-close");projects.forEach(function(t){t.addEventListener("click",function(e){e.preventDefault(),index=t.getAttribute("data-index"),projectPreviews.forEach(function(e){e.getAttribute("data-index")===index?e.classList.remove("closed"):e.classList.add("closed")})})}),closeButtons.forEach(function(e){e.addEventListener("click",function(){e.closest(".project-preview").classList.add("closed")})}),portfolioWindowCloseButtons.addEventListener("click",function(){projectPreviews.forEach(function(e){e.classList.add("closed")})}),previewOverlays.forEach(function(e){e.addEventListener("click",function(){projectPreviews.forEach(function(e){e.classList.add("closed")})})});var closedWindows=document.querySelectorAll(".closed"),closeAll=document.querySelector(".close-all"),windowWrappers=(closeAllButton=document.querySelector(".close-all button"),document.querySelectorAll(".window-wrapper")),windowZ=(projectPreviews=document.querySelectorAll(".project-preview"),closeButtons=document.querySelectorAll(".window-close"),50),windowFunctions=function(){closeButtons.forEach(function(e){e.addEventListener("click",function(){e.closest(".window-wrapper").classList.add("closed"),checkClosedList()})});function t(e,t){e.preventDefault();var n=document.getElementById(t);n.classList.remove("closed"),windowWrappers.forEach(function(e){e.classList.add("disabled")}),n.classList.remove("disabled"),windowZ+=1,n.style.zIndex=windowZ,closeButton=n.querySelector(".window-close"),closeButton.focus(),closeButton.blur(),checkClosedList()}document.getElementById("me").addEventListener("click",function(e){t(e,"meWindow")}),document.getElementById("music").addEventListener("click",function(e){t(e,"musicWindow")}),document.getElementById("journal").addEventListener("click",function(e){t(e,"journalWindow")}),document.getElementById("portfolio").addEventListener("click",function(e){t(e,"portfolioWindow")}),document.getElementById("contact").addEventListener("click",function(e){t(e,"contactWindow")}),windowWrappers.forEach(function(t){t.addEventListener("mousedown",function(){var e;windowZ+=1,(e=t).style.zIndex=windowZ,windowWrappers.forEach(function(e){e.classList.add("disabled")}),e.classList.remove("disabled")})})},checkClosedList=function(){(closedWindows=document.querySelectorAll(".window-wrapper.closed")).length<windowWrappers.length-1?closeAll.classList.add("visible"):closeAll.classList.remove("visible"),closedWindows.length<windowWrappers.length?$body.classList.add("window-open"):$body.classList.remove("window-open"),onResize()};closeAllButton.addEventListener("click",function(){windowWrappers.forEach(function(e){e.classList.add("closed")}),projectPreviews.forEach(function(e){e.classList.add("closed")}),checkClosedList()}),windowFunctions();