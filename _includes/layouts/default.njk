<!DOCTYPE html>
<html lang="en">
  <head>
    <title>
      {% block title %}Stephen Barkan{% endblock %}
    </title>
    <meta charset="UTF-8"/>
    {% if description %}
      <meta name="description" content="{{description}}"/>
    {% endif %}
    <meta http-equiv="x-ua-compatible" content="ie=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no, viewport-fit=cover"/>
    <link rel="stylesheet" href="https://use.typekit.net/bpn0sjs.css">
    <link rel="stylesheet" href="/style.css?v={% version %}"/>
    {% block head %}{% endblock %}
  </head>
  <body data-active-applet="posts" class="bg-ui-wallpaper">
  <div id="app"
    x-data="{
        activeApplet: 'photos',
        getUrlParam(param) {
            let value;
            const queries = window.location.search.substring(1).split('&');
            queries.forEach(function(query) {
                const pair = query.split('=');
                if(pair[0] == param) {
                    value = pair[1];
                }
            })
            return value;
        },
        getInitActiveApplet() {
            if (this.getUrlParam('activeApplet')) {
                this.activeApplet = this.getUrlParam('activeApplet');
            } else {
                this.activeApplet = 'posts'
            }
        },
        setActiveApplet(applet) {
            this.activeApplet = applet;
            let stateObj
            history.replaceState(stateObj, '', `?activeApplet=${applet}`);
        }
    }"
    x-init="getInitActiveApplet(), setActiveApplet(activeApplet)"
    :data-active-applet="activeApplet"
    :data-applet="activeApplet"
    class="w-full h-screen text-base antialiased transition-all duration-1000 shadow-body easing-linear text-display-primary bg-ui-wallpaper" style="background-image: url(/images/dot-pattern.svg)">
      <main class="grid w-full h-screen grid-rows-site">
        <div class="hidden sm:block">{% include "components/topbar.njk" %}</div>
            {% block content %}
                {{ content | safe }}
            {% endblock %}
        <div class="row-start-3 p-2 pt-0 page-container xs:hidden">{% include "components/bottombar.njk" %}</div>
    </main>
</div>
    <script defer src="https://unpkg.com/alpinejs@3.5.0/dist/cdn.min.js"></script>
    <script src="/../scripts/activeApplet.js"></script>
  </body>
</html>
